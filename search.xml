<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>vue-admin-template 登录改造</title>
      <link href="/undefined.html"/>
      <url>/undefined.html</url>
      
        <content type="html"><![CDATA[<p>本文为修改vue-admin-template第一步，将请求地址和状态码改为自己项目的地址，并成功进入页面</p><h2 id="请求地址更改"><a href="#请求地址更改" class="headerlink" title="请求地址更改"></a>请求地址更改</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种方法：</span></span><br><span class="line">在.<span class="property">env</span>.<span class="property">development</span>文件内，将 <span class="variable constant_">VUE_APP_BASE_API</span> = <span class="string">&#x27;/dev-api&#x27;</span></span><br><span class="line">改为：<span class="variable constant_">VUE_APP_BASE_API</span> = <span class="string">&#x27;http://127.0.0.1:8000&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种方法：</span></span><br><span class="line"><span class="comment">//在vue.config.js文件内</span></span><br><span class="line"><span class="comment">//注释掉mock接口配置</span></span><br><span class="line"><span class="comment">//配置代理转发请求到目标接口</span></span><br><span class="line"><span class="comment">// before: require(&#x27;./mock/mock-server.js&#x27;)</span></span><br><span class="line"><span class="attr">proxy</span>: &#123;</span><br><span class="line">  <span class="string">&#x27;/dev-api&#x27;</span>: &#123; <span class="comment">// 匹配所有以 &#x27;/dev-api&#x27;开头的请求路径</span></span><br><span class="line">    <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8800&#x27;</span>,</span><br><span class="line">    <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">// 支持跨域</span></span><br><span class="line">    <span class="attr">pathRewrite</span>: &#123; <span class="comment">// 重写路径: 去掉路径中开头的&#x27;/dev-api&#x27;</span></span><br><span class="line">      <span class="string">&#x27;^/dev-api&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="request-js请求封装和状态码修改"><a href="#request-js请求封装和状态码修改" class="headerlink" title="request.js请求封装和状态码修改"></a>request.js请求封装和状态码修改</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MessageBox</span>, <span class="title class_">Message</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getToken &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/auth&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: process.<span class="property">env</span>.<span class="property">VUE_APP_BASE_API</span>,</span><br><span class="line">  <span class="comment">// withCredentials: true, // 发送cookie时，跨域请求</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span> <span class="comment">// request timeout</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//  在发送请求之前做些什么</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (store.<span class="property">getters</span>.<span class="property">token</span>) &#123;</span><br><span class="line">      <span class="comment">// 让每个请求都带有令牌</span></span><br><span class="line">      <span class="comment">//  [&#x27; x token&#x27;]是自定义标头键</span></span><br><span class="line">      <span class="comment">// 请根据实际情况修改 Authorization</span></span><br><span class="line">      <span class="comment">// config.headers[&#x27;X-Token&#x27;] = getToken()</span></span><br><span class="line">      config.<span class="property">headers</span>[<span class="string">&#x27;Authorization&#x27;</span>] = <span class="title function_">getToken</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 做一些请求错误</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 如果您想获得HTTP信息，如标头或状态</span></span><br><span class="line"><span class="comment">   * return  response =&gt; response</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 根据自定义代码确定请求状态</span></span><br><span class="line"><span class="comment">   * 这里只是一个例子</span></span><br><span class="line"><span class="comment">   * 您也可以通过ttp状态码来判断状态</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> res = response.<span class="property">data</span></span><br><span class="line">    <span class="comment">// 根据后端状态码调整</span></span><br><span class="line">    <span class="comment">// 后端的状态码为 status 所以同步修改</span></span><br><span class="line">    res.<span class="property">code</span> = res.<span class="property">status</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="title class_">Message</span>(&#123;</span><br><span class="line">        <span class="attr">message</span>: res.<span class="property">msg</span> || <span class="string">&#x27;Error&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 50008: 非法令牌;50012:其他客户端已登录;50014:令牌过期;</span></span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">50008</span> || res.<span class="property">code</span> === <span class="number">50012</span> || res.<span class="property">code</span> === <span class="number">50014</span>) &#123;</span><br><span class="line">        <span class="comment">// to re-login</span></span><br><span class="line">        <span class="title class_">MessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&#x27;您已退出登录，您可以取消以留在此页面上，或重新登录&#x27;</span>, <span class="string">&#x27;确认退出登录&#x27;</span>, &#123;</span><br><span class="line">          <span class="attr">confirmButtonText</span>: <span class="string">&#x27;Re-Login&#x27;</span>,</span><br><span class="line">          <span class="attr">cancelButtonText</span>: <span class="string">&#x27;Cancel&#x27;</span>,</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          store.<span class="title function_">dispatch</span>(<span class="string">&#x27;user/resetToken&#x27;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            location.<span class="title function_">reload</span>()</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(res.<span class="property">message</span> || <span class="string">&#x27;Error&#x27;</span>))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> res</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;err&#x27;</span> + error) <span class="comment">// for debug</span></span><br><span class="line">    <span class="title class_">Message</span>(&#123;</span><br><span class="line">      <span class="attr">message</span>: error.<span class="property">message</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="修改请求的接口地址-api-user-js"><a href="#修改请求的接口地址-api-user-js" class="headerlink" title="修改请求的接口地址 api&#x2F;user.js"></a>修改请求的接口地址 api&#x2F;user.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 登录</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/manage/login&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取用户信息</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getInfo</span>(<span class="params">token</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/manage/getUserInfo&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123; token &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 退出登录 暂未有退出登录接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/vue-admin-template/user/logout&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue2.x </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vuex模块化后使用上的区别</title>
      <link href="/undefined.html"/>
      <url>/undefined.html</url>
      
        <content type="html"><![CDATA[<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p><img src="https://img-blog.csdnimg.cn/10bf34538b144efd9adf54f2bd15f1a2.png" alt="在这里插入图片描述"></p><h2 id="index-js代码"><a href="#index-js代码" class="headerlink" title="index.js代码"></a>index.js代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入模块</span></span><br><span class="line"><span class="keyword">import</span> setting <span class="keyword">from</span> <span class="string">&#x27;./modules/setting&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    <span class="attr">sum</span>: <span class="number">12</span>,</span><br><span class="line">    <span class="attr">userInfo</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">        <span class="attr">token</span>: <span class="string">&#x27;hnI6UOiu2GJKN42jhnknJiB7s&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 同步操作state的方法</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    <span class="title function_">jia</span>(<span class="params">state,num</span>)&#123;</span><br><span class="line">        state.<span class="property">sum</span> += num;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">jian</span>(<span class="params">state,num</span>)&#123;</span><br><span class="line">        state.<span class="property">sum</span> -= num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 对state的值加工处理后返回</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">    <span class="title function_">bigSum</span>(<span class="params">state</span>)&#123;</span><br><span class="line">       <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步修改state，通过触发mutations的方法修改state</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">    <span class="title function_">asyncJian</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">        <span class="comment">// 调用mutations下的方法更改state数据</span></span><br><span class="line">        context.<span class="title function_">commit</span>(<span class="string">&#x27;jian&#x27;</span>,value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// modules集合</span></span><br><span class="line"><span class="keyword">const</span> modules = &#123;</span><br><span class="line">    setting,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    state,</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    getters,</span><br><span class="line">    modules</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="setting模块代码"><a href="#setting模块代码" class="headerlink" title="setting模块代码"></a>setting模块代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    <span class="attr">threm</span>: <span class="string">&#x27;light&#x27;</span>, <span class="comment">// 系统主题色</span></span><br><span class="line">    <span class="attr">currentTime</span>: <span class="string">&#x27;暂未设置时间&#x27;</span> <span class="comment">// 当前时间</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步操作state的方法</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    <span class="comment">// 改变主题</span></span><br><span class="line">    <span class="title function_">SET_THREM</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">        state.<span class="property">threm</span> = value;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 更新当前时间</span></span><br><span class="line">    <span class="title function_">SET_TIME</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">        state.<span class="property">currentTime</span> = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步操作state的方法，通过actions触发mutations的方法</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">    <span class="title function_">setTime</span>(<span class="params">store,value</span>)&#123;</span><br><span class="line">        store.<span class="title function_">commit</span>(<span class="string">&#x27;SET_TIME&#x27;</span>,value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 由于getter,action,mutation默认是注册在全局命名空间的，所以容易造成命名冲突的问题。</span></span><br><span class="line"><span class="comment"> * 为了解决这个问题，Vuex可以设置了、模块命名空间。</span></span><br><span class="line"><span class="comment"> * 通过给模块添加namespaced:true使其拥有自己的命名空间.</span></span><br><span class="line"><span class="comment"> * 这时getter，mutation，action都会自动根据模块注册的路径调整命名。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>, <span class="comment">// 开启命名空间，防止与其他模块的state污染</span></span><br><span class="line">    state,</span><br><span class="line">    mutations,</span><br><span class="line">    actions</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="非模块化下使用"><a href="#非模块化下使用" class="headerlink" title="非模块化下使用"></a>非模块化下使用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState,mapMutations,mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**********分割线***********/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">...<span class="title function_">mapState</span>([<span class="string">&#x27;userInfo&#x27;</span>,<span class="string">&#x27;sum&#x27;</span>]), <span class="comment">// 简写形式</span></span><br><span class="line">...<span class="title function_">mapState</span>( <span class="comment">// 完整写法</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="attr">userInfo</span>: <span class="string">&#x27;userInfo&#x27;</span>,</span><br><span class="line">       <span class="attr">sum</span>: <span class="string">&#x27;sum&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"> ),</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    ...<span class="title function_">mapMutations</span>([<span class="string">&#x27;jia&#x27;</span>]), <span class="comment">// 映射形式</span></span><br><span class="line">    ...<span class="title function_">mapActions</span>([<span class="string">&#x27;asyncJian&#x27;</span>]),</span><br><span class="line"><span class="comment">// 同步修改</span></span><br><span class="line">    <span class="title function_">changeSum1</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;jia&#x27;</span>,<span class="number">2</span>); <span class="comment">// 方式一</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">jia</span>(<span class="number">2</span>); <span class="comment">// 方式二 调用映射的方法,前提需要使用mapMutations映射对应的方法</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 异步修改</span></span><br><span class="line">    <span class="title function_">asyncChangeSum</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;asyncJian&#x27;</span>,<span class="number">2</span>); <span class="comment">// 方式一</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">asyncJian</span>(<span class="number">2</span>); <span class="comment">// 方式二 调用映射的方法,前提需要使用mapActions映射对应的方法</span></span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="模块化中使用"><a href="#模块化中使用" class="headerlink" title="模块化中使用"></a>模块化中使用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState,mapMutations,mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**********分割线***********/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">...<span class="title function_">mapState</span>(<span class="string">&#x27;setting&#x27;</span>,[<span class="string">&#x27;threm&#x27;</span>]), <span class="comment">// 简写形式 setting 模块中的数据</span></span><br><span class="line">...<span class="title function_">mapState</span>( <span class="comment">// 完整写法</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取setting模块下的state数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; state 将setting中的state放到index中的state</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">threm</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">setting</span>.<span class="property">threm</span>,</span><br><span class="line">    <span class="attr">currentTime</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">setting</span>.<span class="property">currentTime</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    ...<span class="title function_">mapMutations</span>(<span class="string">&#x27;setting&#x27;</span>,[<span class="string">&#x27;SET_THREM&#x27;</span>]),</span><br><span class="line">    ...<span class="title function_">mapActions</span>(<span class="string">&#x27;setting&#x27;</span>,[<span class="string">&#x27;setTime&#x27;</span>]),</span><br><span class="line"><span class="comment">// 模块化同步修改</span></span><br><span class="line">    <span class="title function_">changeThrem</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;setting/SET_THREM&#x27;</span>,<span class="string">&#x27;drak111&#x27;</span>); <span class="comment">// 方式一</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">SET_THREM</span>(<span class="string">&#x27;drak&#x27;</span>); <span class="comment">// 方式二 映射</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">asyncChangeTime</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;setting/setTime&#x27;</span>,<span class="string">&#x27;2023-06-02&#x27;</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setTime</span>(<span class="string">&#x27;2023-06-01&#x27;</span>); <span class="comment">// 方式二</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue2.x </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue.config.js配置</title>
      <link href="/undefined.html"/>
      <url>/undefined.html</url>
      
        <content type="html"><![CDATA[<h2 id="文件存在位置"><a href="#文件存在位置" class="headerlink" title="文件存在位置"></a>文件存在位置</h2><p>vue.config.js 是一个可选的配置文件，如果项目的 (和 package.json 同级的) 根目录中存在这个文件</p><h2 id="配置项代码"><a href="#配置项代码" class="headerlink" title="配置项代码"></a>配置项代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"><span class="comment">//默认情况下，Vue CLI 会假设你的应用是被部署在一个域名的根路径上，例如 https://www.xxx.com/。如果应用被部署在一个子路径上，你就需要用这个选项指定这个子路径。例如，如果你的应用被部署在 https://www.xxx.com/test/，则设置 publicPath 为 /test/。</span></span><br><span class="line"><span class="comment">//这个值也可以被设置为空字符串 (&#x27;&#x27;) 或是相对路径 (&#x27;./&#x27;)</span></span><br><span class="line"><span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span>,</span><br><span class="line"><span class="attr">outputDir</span>:<span class="string">&quot;dist&quot;</span>, <span class="comment">// 打包输出文件的目录名字  默认&quot;dist&quot;</span></span><br><span class="line"><span class="attr">assetsDir</span>: <span class="string">&#x27;./static&#x27;</span>,<span class="comment">// 打包后静态资源存放目录的 (相对于 outputDir 的) 目录  默认为&quot;&quot;, 默认与生成的index.html同级</span></span><br><span class="line">indexPath：<span class="string">&quot;index.html&quot;</span>,<span class="comment">// 打包后的入口文件 默认为index.html,默认就是index.html</span></span><br><span class="line"><span class="attr">filenameHashing</span>:<span class="literal">true</span>,<span class="comment">//默认情况下，生成的静态资源在它们的文件名中包含了 hash 以便更好的控制缓存。然而，这也要求 index 的 HTML 是被 Vue CLI 自动生成的。如果你无法使用 Vue CLI 生成的 index HTML，你可以通过将这个选项设为 false 来关闭文件名哈希。</span></span><br><span class="line"> <span class="attr">pages</span>: &#123;</span><br><span class="line">   <span class="attr">index</span>: &#123;</span><br><span class="line">     <span class="comment">// page 的入口</span></span><br><span class="line">     <span class="attr">entry</span>: <span class="string">&#x27;src/index/main.js&#x27;</span>,</span><br><span class="line">     <span class="comment">// 模板来源</span></span><br><span class="line">     <span class="attr">template</span>: <span class="string">&#x27;public/index.html&#x27;</span>,</span><br><span class="line">     <span class="comment">// 在 dist/index.html 的输出</span></span><br><span class="line">     <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">     <span class="comment">// 当使用 title 选项时，</span></span><br><span class="line">     <span class="comment">// template 中的 title 标签需要是 &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</span></span><br><span class="line">     <span class="attr">title</span>: <span class="string">&#x27;Index Page&#x27;</span>,</span><br><span class="line">     <span class="comment">// 在这个页面中包含的块，默认情况下会包含</span></span><br><span class="line">     <span class="comment">// 提取出来的通用 chunk 和 vendor chunk。</span></span><br><span class="line">     <span class="attr">chunks</span>: [<span class="string">&#x27;chunk-vendors&#x27;</span>, <span class="string">&#x27;chunk-common&#x27;</span>, <span class="string">&#x27;index&#x27;</span>]</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">// 官方解释：当使用只有入口的字符串格式时，</span></span><br><span class="line">   <span class="comment">// 模板会被推导为 `public/subpage.html`</span></span><br><span class="line">   <span class="comment">// 并且如果找不到的话，就回退到 `public/index.html`。</span></span><br><span class="line">   <span class="comment">// 输出文件名会被推导为 `subpage.html`。</span></span><br><span class="line">   <span class="attr">subpage</span>: <span class="string">&#x27;src/subpage/main.js&#x27;</span></span><br><span class="line"> &#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//lintOnSave:</span></span><br><span class="line"><span class="comment">//1.是否在开发环境下通过 eslint-loader 在每次保存时 lint 代码。这个值会在 @vue/cli-plugin-eslint 被安装之后生效。</span></span><br><span class="line"><span class="comment">//2.设置为 true 时，eslint-loader 会将 lint 错误输出为编译警告。默认情况下，警告仅仅会被输出到命令行，且不会使得编译失败。</span></span><br><span class="line"><span class="comment">//3.如果你希望让 lint 错误在开发时直接显示在浏览器中，你可以使用 lintOnSave: &#x27;error&#x27;。这会强制 eslint-loader 将 lint 错误输出为编译错误，同时也意味着 lint 错误将会导致编译失败。</span></span><br><span class="line"><span class="attr">lintOnSave</span>:<span class="literal">true</span>,</span><br><span class="line"><span class="attr">runtimeCompiler</span>:<span class="literal">false</span>,<span class="comment">//是否使用包含运行时编译器的 Vue 构建版本。设置为 true 后你就可以在 Vue 组件中使用 template 选项了，但是这会让你的应用额外增加 10kb 左右。</span></span><br><span class="line"><span class="attr">transpileDependencies</span>:[],<span class="comment">//默认情况下 babel-loader 会忽略所有 node_modules 中的文件。如果你想要通过 Babel 显式转译一个依赖，可以在这个选项中列出来。</span></span><br><span class="line"><span class="attr">productionSourceMap</span>:<span class="literal">true</span>,<span class="comment">//如果你不需要生产环境的 source map，可以将其设置为 false 以加速生产环境构建   这玩意设置成false之后，能把打包后的文件大小减小80%   当时我的项目大小是8m+  设成false之后变成了2m+     productionSourceMap:false,之后，就不会生成map文件，map文件的作用在于：项目打包后，代码都是经过压缩加密的，如果运行时报错，输出的错误信息无法准确得知是哪里的代码报错。也就是说map文件相当于是查看源码的一个东西。如果不需要定位问题，并且不想被看到源码，就把productionSourceMap 置为false，既可以减少包大小，也可以加密源码。</span></span><br><span class="line"><span class="attr">crossorigin</span>:<span class="string">&quot;undefined&quot;</span>,<span class="comment">//设置生成的 HTML 中 &lt;link rel=&quot;stylesheet&quot;&gt; 和 &lt;script&gt; 标签的 crossorigin 属性。</span></span><br><span class="line"><span class="attr">integrity</span>:<span class="literal">false</span>,<span class="comment">//在生成的 HTML 中的 &lt;link rel=&quot;stylesheet&quot;&gt; 和 &lt;script&gt; 标签上启用 Subresource Integrity (SRI)。</span></span><br><span class="line"><span class="attr">configureWebpack</span>:<span class="title class_">Object</span> | <span class="title class_">Function</span>,<span class="comment">//下面举个例子：</span></span><br><span class="line"><span class="attr">configureWebpack</span>: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// 为生产环境修改配置...</span></span><br><span class="line">            config.<span class="property">mode</span> = <span class="string">&quot;production&quot;</span>;</span><br><span class="line">            <span class="comment">// 这里修改下 </span></span><br><span class="line">config.<span class="property">optimization</span>.<span class="property">minimizer</span> = [</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">UglifyJsPlugin</span>(&#123;</span><br><span class="line"><span class="attr">uglifyOptions</span>: &#123;</span><br><span class="line"><span class="attr">compress</span>: &#123;</span><br><span class="line"><span class="attr">warnings</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="attr">drop_console</span>: <span class="literal">true</span>, <span class="comment">//console</span></span><br><span class="line"><span class="attr">drop_debugger</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">pure_funcs</span>: [<span class="string">&#x27;console.log&#x27;</span>] <span class="comment">//移除console</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">]</span><br><span class="line"><span class="comment">//打包文件大小配置</span></span><br><span class="line">config[<span class="string">&quot;performance&quot;</span>] = &#123;</span><br><span class="line"><span class="string">&quot;maxEntrypointSize&quot;</span>:<span class="number">10000000</span>,</span><br><span class="line"><span class="string">&quot;maxAssetSize&quot;</span>:<span class="number">30000000</span></span><br><span class="line">&#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 为开发环境修改配置...</span></span><br><span class="line">            config.<span class="property">mode</span> = <span class="string">&quot;development&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"><span class="comment">//上面是统一使用configureWebpack的函数模式，然后函数模式里面默认会有一个config参数，需要增加或者修改configureWebpack对应的参数，就直接使用config去修改就可以了！</span></span><br><span class="line"><span class="comment">//我这里使用了两个功能，第一个是打包build的时候去掉console的调试信息，第二个就是修改打包静态资源文件大小设置的配置</span></span><br><span class="line"><span class="attr">chainWebpack</span>:<span class="keyword">function</span>,<span class="comment">//是一个函数，会接收一个基于 webpack-chain 的 ChainableConfig 实例。允许对内部的 webpack 配置进行更细粒度的修改。下面举个例子</span></span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  config.<span class="property">resolve</span>.<span class="property">alias</span></span><br><span class="line">    .<span class="title function_">set</span>(<span class="string">&#x27;@&#x27;</span>, <span class="title function_">resolve</span>(<span class="string">&#x27;src&#x27;</span>))<span class="comment">//设置@快捷到src目录</span></span><br><span class="line">    .<span class="title function_">set</span>(<span class="string">&#x27;view&#x27;</span>, <span class="title function_">resolve</span>(<span class="string">&#x27;src/view&#x27;</span>))<span class="comment">//设置view快捷指定到src/view目录</span></span><br><span class="line">    .<span class="title function_">set</span>(<span class="string">&#x27;$css&#x27;</span>,<span class="title function_">resolve</span>(<span class="string">&#x27;/static/css&#x27;</span>))</span><br><span class="line">    .<span class="title function_">set</span>(<span class="string">&#x27;$common&#x27;</span>,<span class="title function_">resolve</span>(<span class="string">&#x27;/components&#x27;</span>))</span><br><span class="line">    .<span class="title function_">set</span>(<span class="string">&#x27;$api&#x27;</span>,<span class="title function_">resolve</span>(<span class="string">&#x27;/api&#x27;</span>))</span><br><span class="line">    .<span class="title function_">set</span>(<span class="string">&#x27;$page&#x27;</span>,<span class="title function_">resolve</span>(<span class="string">&#x27;/pages&#x27;</span>))</span><br><span class="line">    .<span class="title function_">set</span>(<span class="string">&#x27;$js&#x27;</span>,<span class="title function_">resolve</span>(<span class="string">&#x27;/static/js&#x27;</span>));</span><br><span class="line">    <span class="comment">// 删除预加载</span></span><br><span class="line">  config.<span class="property">plugins</span>.<span class="title function_">delete</span>(<span class="string">&#x27;preload&#x27;</span>)</span><br><span class="line">  config.<span class="property">plugins</span>.<span class="title function_">delete</span>(<span class="string">&#x27;prefetch&#x27;</span>)</span><br><span class="line">    <span class="comment">// 压缩代码</span></span><br><span class="line">  config.<span class="property">optimization</span>.<span class="title function_">minimize</span>(<span class="literal">true</span>)</span><br><span class="line">    <span class="comment">// 分割代码</span></span><br><span class="line">  config.<span class="property">optimization</span>.<span class="title function_">splitChunks</span>(&#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&#x27;all&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">css</span>:&#123;</span><br><span class="line"><span class="attr">modules</span>:<span class="literal">false</span>,<span class="comment">//默认情况下，只有 *.module.[ext] 结尾的文件才会被视作 CSS Modules 模块。设置为 true 后你就可以去掉文件名中的 .module 并将所有的 *.(css|scss|sass|less|styl(us)?) 文件视为 CSS Modules 模块。</span></span><br><span class="line"><span class="attr">extract</span>:<span class="literal">true</span>,<span class="comment">//Default: 生产环境下是 true，开发环境下是 false  是否将组件中的 CSS 提取至一个独立的 CSS 文件中 (而不是动态注入到 JavaScript 中的 inline 代码)。</span></span><br><span class="line"><span class="attr">sourceMap</span>:<span class="literal">false</span>,<span class="comment">//是否为 CSS 开启 source map。设置为 true 之后可能会影响构建的性能。</span></span><br><span class="line"><span class="attr">loaderOptions</span>:&#123;&#125;,<span class="comment">//向 CSS 相关的 loader 传递选项。例如：</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">devServer</span>:&#123;</span><br><span class="line">  <span class="attr">proxy</span>:<span class="string">&#x27;http://localhost:8080&#x27;</span>,<span class="comment">//如果你的前端应用和后端 API 服务器没有运行在同一个主机上，你需要在开发环境下将 API 请求代理到 API 服务器。这个问题可以通过 vue.config.js 中的 devServer.proxy 选项来配置。http://localhost:8080这会告诉开发服务器将任何未知请求 (没有匹配到静态文件的请求) 代理到http://localhost:4000   如果你想要更多的代理控制行为，也可以使用一个 path: options 成对的对象。完整的选项可以查阅 http-proxy-middleware 。</span></span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">    <span class="comment">/** 配置后可将（示例）：http://127.0.0.1:3100/abc/testapi接口改变成</span></span><br><span class="line"><span class="comment">    * http://xxxx.xxx:8088/api/testapi请求</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">      <span class="string">&#x27;/abc&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://xxxx.xxx:8088&#x27;</span>,<span class="comment">// 后台接口域名</span></span><br><span class="line">         <span class="attr">secure</span>: <span class="literal">false</span>,  <span class="comment">// 如果是https接口，需要配置这个参数</span></span><br><span class="line">        <span class="attr">ws</span>: <span class="literal">true</span>,<span class="comment">//如果要代理 websockets，配置这个参数</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,<span class="comment">//是否跨域</span></span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123; <span class="comment">// 匹配到以/abc开头的替换成/api</span></span><br><span class="line"><span class="string">&#x27;^/abc&#x27;</span>: <span class="string">&#x27;/api&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 支持多项配置</span></span><br><span class="line">      <span class="string">&#x27;/foo&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;&lt;other_url&gt;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">parallel</span>:<span class="string">&#x27;boolean&#x27;</span>,<span class="comment">//是否为 Babel 或 TypeScript 使用 thread-loader。该选项在系统的 CPU 有多于一个内核时自动启用，仅作用于生产构建。</span></span><br><span class="line">  <span class="attr">pluginOptions</span>:&#123;</span><br><span class="line">  <span class="comment">//less全局变量引用</span></span><br><span class="line">    <span class="string">&#x27;style-resources-loader&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">preProcessor</span>: <span class="string">&#x27;less&#x27;</span>,</span><br><span class="line">      <span class="attr">patterns</span>: [</span><br><span class="line">      path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./src/assets/varibles.less&#x27;</span>),</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue2.x </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js项目常用数据处理算法——转树状结构、数组分页、模糊查询、数组去重、时间格式化、金额格式化、自定义复制粘贴</title>
      <link href="/undefined.html"/>
      <url>/undefined.html</url>
      
        <content type="html"><![CDATA[<h2 id="一维数组转树状结构"><a href="#一维数组转树状结构" class="headerlink" title="一维数组转树状结构"></a>一维数组转树状结构</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">content</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">pid</span>: <span class="literal">null</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">content</span>: <span class="string">&#x27;bbb&#x27;</span>, <span class="attr">pid</span>: <span class="number">1</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">content</span>: <span class="string">&#x27;ccc&#x27;</span>, <span class="attr">pid</span>: <span class="number">2</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">content</span>: <span class="string">&#x27;ddd&#x27;</span>, <span class="attr">pid</span>: <span class="number">1</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">content</span>: <span class="string">&#x27;eee&#x27;</span>, <span class="attr">pid</span>: <span class="number">1</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">6</span>, <span class="attr">content</span>: <span class="string">&#x27;fff&#x27;</span>, <span class="attr">pid</span>: <span class="literal">null</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">7</span>, <span class="attr">content</span>: <span class="string">&#x27;fff&#x27;</span>, <span class="attr">pid</span>: <span class="number">6</span> &#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> result = arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, curr, i, arr</span>) =&gt;</span> &#123;</span><br><span class="line">    curr.<span class="property">children</span> = arr.<span class="title function_">filter</span>(<span class="function"><span class="params">v</span> =&gt;</span> v.<span class="property">pid</span> === curr.<span class="property">id</span>);</span><br><span class="line">    <span class="keyword">if</span> (!curr.<span class="property">pid</span>) prev.<span class="title function_">push</span>(curr);</span><br><span class="line">    <span class="keyword">return</span> prev</span><br><span class="line">&#125;, [])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br></pre></td></tr></table></figure><h2 id="数组分页"><a href="#数组分页" class="headerlink" title="数组分页"></a>数组分页</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分页</span></span><br><span class="line"><span class="comment"> *  &#123;Array&#125; arr 分页的数组</span></span><br><span class="line"><span class="comment"> *  &#123;Number&#125; size 每页大小</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">chunkArrayInGroups</span>(<span class="params">arr, size</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> length = arr.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">var</span> newArr = [];</span><br><span class="line">    <span class="keyword">var</span> i = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(length / size * <span class="number">1.0</span>);</span><br><span class="line">    <span class="keyword">var</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (j &lt; i) &#123;</span><br><span class="line">        <span class="keyword">var</span> spare = length - j * size &gt;= size ? size : length - j * size;</span><br><span class="line">        <span class="keyword">var</span> temp = arr.<span class="title function_">slice</span>(j * size, j * size + spare);</span><br><span class="line">        newArr.<span class="title function_">push</span>(temp);</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newArr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数组对象模糊查询"><a href="#数组对象模糊查询" class="headerlink" title="数组对象模糊查询"></a>数组对象模糊查询</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">phone</span>: <span class="string">&quot;15512341234&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;李四&quot;</span>,</span><br><span class="line">    <span class="attr">phone</span>: <span class="string">&quot;13112341234&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;王四&quot;</span>,</span><br><span class="line">    <span class="attr">phone</span>: <span class="string">&quot;18199809980&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fuzzySearch</span>(<span class="params">...keywords</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> filteredArr = arr.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> keyword <span class="keyword">of</span> keywords) &#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        !item.<span class="property">name</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">includes</span>(keyword.<span class="title function_">toLowerCase</span>()) &amp;&amp;</span><br><span class="line">        !item.<span class="property">phone</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">includes</span>(keyword.<span class="title function_">toLowerCase</span>())</span><br><span class="line">      ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 如果有一个关键词不匹配，则返回 false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// 如果所有关键词都匹配，则返回 true</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> filteredArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例用法</span></span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">fuzzySearch</span>(<span class="string">&quot;张&quot;</span>, <span class="string">&quot;5&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br></pre></td></tr></table></figure><h2 id="数字、大小写字母、下划线随机n位字符串"><a href="#数字、大小写字母、下划线随机n位字符串" class="headerlink" title="数字、大小写字母、下划线随机n位字符串"></a>数字、大小写字母、下划线随机n位字符串</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// n为需要生成的位数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">generateMixed</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> chars = [<span class="string">&quot;0&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;3&quot;</span>,<span class="string">&quot;4&quot;</span>,<span class="string">&quot;5&quot;</span>,<span class="string">&quot;6&quot;</span>,<span class="string">&quot;7&quot;</span>,<span class="string">&quot;8&quot;</span>,<span class="string">&quot;9&quot;</span>,<span class="string">&quot;-&quot;</span>,<span class="string">&quot;A&quot;</span>,<span class="string">&quot;B&quot;</span>,<span class="string">&quot;C&quot;</span>,<span class="string">&quot;D&quot;</span>,<span class="string">&quot;E&quot;</span>,<span class="string">&quot;F&quot;</span>,<span class="string">&quot;G&quot;</span>,<span class="string">&quot;H&quot;</span>,<span class="string">&quot;I&quot;</span>,<span class="string">&quot;J&quot;</span>,<span class="string">&quot;K&quot;</span>,<span class="string">&quot;L&quot;</span>,<span class="string">&quot;M&quot;</span>,<span class="string">&quot;N&quot;</span>,<span class="string">&quot;O&quot;</span>,<span class="string">&quot;P&quot;</span>,<span class="string">&quot;Q&quot;</span>,<span class="string">&quot;R&quot;</span>,<span class="string">&quot;S&quot;</span>,<span class="string">&quot;T&quot;</span>,<span class="string">&quot;U&quot;</span>,<span class="string">&quot;V&quot;</span>,<span class="string">&quot;W&quot;</span>,<span class="string">&quot;X&quot;</span>,<span class="string">&quot;Y&quot;</span>,<span class="string">&quot;Z&quot;</span>,<span class="string">&quot;_&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;f&quot;</span>,<span class="string">&quot;g&quot;</span>,<span class="string">&quot;h&quot;</span>,<span class="string">&quot;i&quot;</span>,<span class="string">&quot;j&quot;</span>,<span class="string">&quot;k&quot;</span>,<span class="string">&quot;l&quot;</span>,<span class="string">&quot;m&quot;</span>,<span class="string">&quot;n&quot;</span>,<span class="string">&quot;o&quot;</span>,<span class="string">&quot;p&quot;</span>,<span class="string">&quot;q&quot;</span>,<span class="string">&quot;r&quot;</span>,<span class="string">&quot;s&quot;</span>,<span class="string">&quot;t&quot;</span>,<span class="string">&quot;u&quot;</span>,<span class="string">&quot;v&quot;</span>,<span class="string">&quot;w&quot;</span>,<span class="string">&quot;x&quot;</span>,<span class="string">&quot;y&quot;</span>,<span class="string">&quot;z&quot;</span>];</span><br><span class="line">    <span class="keyword">let</span> res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> id = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * chars.<span class="property">length</span>);</span><br><span class="line">      res += chars[id];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h2><h3 id="方法一，Set对象"><a href="#方法一，Set对象" class="headerlink" title="方法一，Set对象"></a>方法一，Set对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> newArr1 = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Set</span>(arr));</span><br><span class="line"><span class="keyword">let</span> newArr2 = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)];</span><br></pre></td></tr></table></figure><h3 id="方法二，foreach和for"><a href="#方法二，foreach和for" class="headerlink" title="方法二，foreach和for"></a>方法二，foreach和for</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> newArr3 = [];</span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, i</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (newArr3.<span class="title function_">indexOf</span>(item) == -<span class="number">1</span>) &#123;</span><br><span class="line">    newArr3.<span class="title function_">push</span>(item);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newArr4 = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!newArr4.<span class="title function_">includes</span>(arr[i])) &#123;</span><br><span class="line">    newArr4.<span class="title function_">push</span>(arr[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="方法三，数组对象Map对象去重"><a href="#方法三，数组对象Map对象去重" class="headerlink" title="方法三，数组对象Map对象去重"></a>方法三，数组对象Map对象去重</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr2 = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="attr">value</span>: <span class="string">&quot;明月&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">    <span class="attr">value</span>: <span class="string">&quot;可欣&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">    <span class="attr">value</span>: <span class="string">&quot;小红&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="attr">value</span>: <span class="string">&quot;小馨&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">    <span class="attr">value</span>: <span class="string">&quot;小静&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> arr2) &#123;</span><br><span class="line">  map.<span class="title function_">set</span>(item.<span class="property">id</span>, item);</span><br><span class="line">&#125;</span><br><span class="line">arr2 = [...map.<span class="title function_">values</span>()];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2);</span><br></pre></td></tr></table></figure><h2 id="时间格式化，toLocaleString对象"><a href="#时间格式化，toLocaleString对象" class="headerlink" title="时间格式化，toLocaleString对象"></a>时间格式化，toLocaleString对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">toLocaleString</span>()); <span class="comment">// 2022/12/31 上午11:36:33</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( date.<span class="title function_">toLocaleString</span>(<span class="string">&quot;zh&quot;</span>) ); <span class="comment">// &quot;2022/12/31 上午11:51:01&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( date.<span class="title function_">toLocaleString</span>(<span class="string">&quot;en&quot;</span>) ); <span class="comment">// &quot;12/31/2022, 11:51:01 AM&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( date.<span class="title function_">toLocaleString</span>(<span class="string">&quot;ja&quot;</span>) ); <span class="comment">// &quot;2022/12/31 11:51:01&quot;</span></span><br></pre></td></tr></table></figure><h2 id="金额格式化"><a href="#金额格式化" class="headerlink" title="金额格式化"></a>金额格式化</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nums = <span class="number">32815498.56</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( nums.<span class="title function_">toLocaleString</span>() ); <span class="comment">// 32,815,498.56</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( nums.<span class="title function_">toLocaleString</span>(<span class="string">&#x27;zh&#x27;</span>, &#123; <span class="attr">style</span>: <span class="string">&#x27;decimal&#x27;</span> &#125;) ); <span class="comment">// 32,815,498.56</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( nums.<span class="title function_">toLocaleString</span>(<span class="string">&#x27;zh&#x27;</span>, &#123; <span class="attr">style</span>: <span class="string">&#x27;percent&#x27;</span> &#125;) ); <span class="comment">// 3,281,549,856%</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( nums.<span class="title function_">toLocaleString</span>(<span class="string">&#x27;zh&#x27;</span>, &#123; <span class="attr">style</span>: <span class="string">&#x27;currency&#x27;</span>, <span class="attr">currency</span>: <span class="string">&#x27;CNY&#x27;</span> &#125;) );  <span class="comment">// ¥32,815,498.56</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( nums.<span class="title function_">toLocaleString</span>(<span class="string">&#x27;zh&#x27;</span>, &#123; <span class="attr">style</span>: <span class="string">&#x27;currency&#x27;</span>, <span class="attr">currency</span>: <span class="string">&#x27;cny&#x27;</span>, <span class="attr">currencyDisplay</span>: <span class="string">&#x27;code&#x27;</span> &#125;) ); <span class="comment">// CNY 32,815,498.56</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( nums.<span class="title function_">toLocaleString</span>(<span class="string">&#x27;zh&#x27;</span>, &#123; <span class="attr">style</span>: <span class="string">&#x27;currency&#x27;</span>, <span class="attr">currency</span>: <span class="string">&#x27;cny&#x27;</span>, <span class="attr">currencyDisplay</span>: <span class="string">&#x27;name&#x27;</span> &#125;) ); <span class="comment">// 32,815,498.56人民币</span></span><br></pre></td></tr></table></figure><h2 id="自定义复制粘贴"><a href="#自定义复制粘贴" class="headerlink" title="自定义复制粘贴"></a>自定义复制粘贴</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;empty-font&quot;</span>&gt;选中这一段文字，点击 ctrl+C 或 者右键选择复制&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//监听整个页面的 copy 事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;copy&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// clipboardData 对象是为通过编辑菜单、快捷菜单和快捷键执行的编辑操作所保留的，也就是你复制或者剪切内容</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> clipboardData = e.<span class="property">clipboardData</span> || <span class="variable language_">window</span>.<span class="property">clipboardData</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 如果 未复制或者未剪切，直接 return</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (!clipboardData) <span class="keyword">return</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// Selection 对象 表示用户选择的文本范围或光标的当前位置。</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 声明一个变量接收 -- 用户输入的剪切或者复制的文本转化为字符串</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> text = <span class="variable language_">window</span>.<span class="title function_">getSelection</span>().<span class="title function_">toString</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (text) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 如果文本存在，首先取消默认行为</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      e.<span class="title function_">preventDefault</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 通过调用 clipboardData 对象的 setData(format,data) 方法，设置相关文本</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// format 一个 DOMString 类型 表示要添加到 drag object 的拖动数据的类型</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// data 一个 DOMString 表示要添加到 drag object 的数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      clipboardData.<span class="title function_">setData</span>(<span class="string">&quot;text/plain&quot;</span>, text + <span class="string">&quot;\r\n---这是追加的版权内容&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工具库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Vue </tag>
            
            <tag> 插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 敏感词检测、替换、过滤</title>
      <link href="/undefined.html"/>
      <url>/undefined.html</url>
      
        <content type="html"><![CDATA[<h2 id="一、检测是否存在敏感词"><a href="#一、检测是否存在敏感词" class="headerlink" title="一、检测是否存在敏感词"></a>一、检测是否存在敏感词</h2><p>效果：输入一个字符串，检测该字符串是否存在敏感词，返回Boolean。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 敏感词数组</span></span><br><span class="line"><span class="keyword">const</span> sensitiveWordsArray = [<span class="string">&#x27;你妹的&#x27;</span>,<span class="string">&#x27;你大爷&#x27;</span>,<span class="string">&#x27;傻&#x27;</span>];</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 检测方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; str 检测的字符</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="type">Boolean</span>&#125; 是否存在敏感词</span></span><br><span class="line"><span class="comment">     * */</span> </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">filtion</span>(<span class="params">str</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; sensitiveWordsArray.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt;= str.<span class="property">length</span> - sensitiveWordsArray[i].<span class="property">length</span>; j++) &#123;</span><br><span class="line">                <span class="comment">//根据敏感字符个数截取str的字符进行判断</span></span><br><span class="line">                <span class="keyword">if</span> (sensitiveWordsArray[i] == str.<span class="title function_">slice</span>(j, j + sensitiveWordsArray[i].<span class="property">length</span>)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">   &#125;</span><br><span class="line">   </span><br></pre></td></tr></table></figure><h3 id="调用filtion示例"><a href="#调用filtion示例" class="headerlink" title="调用filtion示例"></a>调用<em><strong>filtion</strong></em>示例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test_01 = <span class="title function_">flition</span>(<span class="string">&#x27;你大爷&#x27;</span>);</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(test_01); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="二、检测到后输入指定字符替换该敏感词"><a href="#二、检测到后输入指定字符替换该敏感词" class="headerlink" title="二、检测到后输入指定字符替换该敏感词"></a>二、检测到后输入指定字符替换该敏感词</h2><p>效果：输入一个字符串和替换字符，检测该字符串是否存在敏感词，存在则用替换词替换掉敏感词，返回新的字符串。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 替换</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; str 检测的字符</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; char 替换的字符</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="type">String</span>&#125; 替换后的文字</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">replace</span>(<span class="params">str, char</span>) &#123;</span><br><span class="line">        <span class="comment">//str: 需要进行替换的字符串</span></span><br><span class="line">        <span class="comment">//char: 需要替换的字符</span></span><br><span class="line">        <span class="comment">//遍历敏感词库</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; sensitiveWordsArray.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt;= str.<span class="property">length</span> - sensitiveWordsArray[i].<span class="property">length</span>; j++) &#123;</span><br><span class="line">                <span class="comment">//根据敏感字符个数截取str的字符进行判断</span></span><br><span class="line">                <span class="keyword">if</span> (sensitiveWordsArray[i] == str.<span class="title function_">slice</span>(j, j + sensitiveWordsArray[i].<span class="property">length</span>)) &#123;</span><br><span class="line">                    <span class="keyword">let</span> c = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; sensitiveWordsArray[i].<span class="property">length</span>; k++) &#123;</span><br><span class="line">                        c += char;</span><br><span class="line">                    &#125;</span><br><span class="line">                    str = str.<span class="title function_">slice</span>(<span class="number">0</span>, j) + c + str.<span class="title function_">slice</span>(j + sensitiveWordsArray[i].<span class="property">length</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="调用replace示例"><a href="#调用replace示例" class="headerlink" title="调用replace示例"></a>调用<em><strong>replace</strong></em>示例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test_02 = <span class="title function_">replace</span>(<span class="string">&#x27;你怎么能这样，去你大爷的&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test_02); <span class="comment">// 你怎么能这样，去***的</span></span><br></pre></td></tr></table></figure><h2 id="全部代码"><a href="#全部代码" class="headerlink" title="全部代码"></a>全部代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sensitiveWordsArray = [<span class="string">&#x27;你妹的&#x27;</span>,<span class="string">&#x27;你大爷&#x27;</span>,<span class="string">&#x27;傻&#x27;</span>];</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 检测</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; str 检测的字符</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Boolean</span>&#125; 是否存在敏感词</span></span><br><span class="line"><span class="comment"> * */</span> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">flition</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; sensitiveWordsArray.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt;= str.<span class="property">length</span> - sensitiveWordsArray[i].<span class="property">length</span>; j++) &#123;</span><br><span class="line">            <span class="comment">//根据敏感字符个数截取str的字符进行判断</span></span><br><span class="line">            <span class="keyword">if</span> (sensitiveWordsArray[i] == str.<span class="title function_">slice</span>(j, j + sensitiveWordsArray[i].<span class="property">length</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 替换</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; str 检测的字符</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; char 替换的字符</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">String</span>&#125; 替换后的文字</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">replace</span>(<span class="params">str, char</span>) &#123;</span><br><span class="line">    <span class="comment">//str: 需要进行替换的字符串</span></span><br><span class="line">    <span class="comment">//char: 需要替换的字符</span></span><br><span class="line">    <span class="comment">//遍历敏感词库</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; sensitiveWordsArray.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt;= str.<span class="property">length</span> - sensitiveWordsArray[i].<span class="property">length</span>; j++) &#123;</span><br><span class="line">            <span class="comment">//根据敏感字符个数截取str的字符进行判断</span></span><br><span class="line">            <span class="keyword">if</span> (sensitiveWordsArray[i] == str.<span class="title function_">slice</span>(j, j + sensitiveWordsArray[i].<span class="property">length</span>)) &#123;</span><br><span class="line">                <span class="keyword">let</span> c = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; sensitiveWordsArray[i].<span class="property">length</span>; k++) &#123;</span><br><span class="line">                    c += char;</span><br><span class="line">                &#125;</span><br><span class="line">                str = str.<span class="title function_">slice</span>(<span class="number">0</span>, j) + c + str.<span class="title function_">slice</span>(j + sensitiveWordsArray[i].<span class="property">length</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> test_01 = <span class="title function_">flition</span>(<span class="string">&#x27;你大爷&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test_01); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> test_02 = <span class="title function_">replace</span>(<span class="string">&#x27;你怎么能这样，去你大爷的&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test_02); <span class="comment">// 你怎么能这样，去***的</span></span><br></pre></td></tr></table></figure><h2 id="第三方库的使用"><a href="#第三方库的使用" class="headerlink" title="第三方库的使用"></a>第三方库的使用</h2><p>很多人因为找不到更多的敏感词，自己一个个添加敏感词的写又太麻烦，所以我在去年去网站爬了一点敏感词下来，敏感词类包括了  f罪、z治、b力、s情、x腥、r骂等。因考虑到词库记录不完整，为了方便使用者后续自行添加，打算不进行压缩。<br>该npm</p><h3 id="安装插件（该插件是我本人写的，并上传至npm的，放心使用）"><a href="#安装插件（该插件是我本人写的，并上传至npm的，放心使用）" class="headerlink" title="安装插件（该插件是我本人写的，并上传至npm的，放心使用）"></a>安装插件（该插件是我本人写的，并上传至npm的，放心使用）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i verification-sensitive</span><br></pre></td></tr></table></figure><h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/ 导入敏感词过滤方法</span><br><span class="line"><span class="keyword">import</span> &#123;replace,filtion&#125; <span class="keyword">from</span> <span class="string">&quot;verification-sensitive&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用replace 返回值为 字符串(被替换后的字符串)</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="title function_">replace</span>(<span class="string">&quot;检索词&quot;</span>,<span class="string">&quot;替换字符&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 返回值为 Boolean类型(true含有敏感词,false无敏感词)</span></span><br><span class="line"><span class="keyword">let</span> flag = <span class="title function_">filtion</span>(<span class="string">&quot;检索词&quot;</span>);</span><br></pre></td></tr></table></figure><p><strong>另外，要是有更好的词库或方法，可以@我一下</strong></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Vue </tag>
            
            <tag> 插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML 5标签 audio 音频的控制</title>
      <link href="/undefined.html"/>
      <url>/undefined.html</url>
      
        <content type="html"><![CDATA[<h2 id="audio标签："><a href="#audio标签：" class="headerlink" title="audio标签："></a>audio标签：</h2><p><strong>1.HTML5 规定了在网页上嵌入音频元素的标准，即使用<audio>元素<br>2.audio元素支持mp3，wav，ogg三种格式</strong></p><h2 id="audio常用属性"><a href="#audio常用属性" class="headerlink" title="audio常用属性"></a>audio常用属性</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> controls 显示控制条</span><br><span class="line"><span class="number">2.</span> autoplay 自动播放，在最新版本谷歌浏览器不支持自动播放</span><br><span class="line"><span class="number">3.</span> loop 循环播放</span><br><span class="line"><span class="number">4.</span> preload 预加载音频资源</span><br><span class="line"><span class="number">5.</span> src 加载音频资源</span><br></pre></td></tr></table></figure><h2 id="audio常用方法"><a href="#audio常用方法" class="headerlink" title="audio常用方法"></a>audio常用方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="title function_">load</span>() 重新加载音频元素</span><br><span class="line"><span class="number">2.</span> <span class="title function_">play</span>() 开始播放音频</span><br><span class="line"><span class="number">3.</span> <span class="title function_">pause</span>() 暂停当前播放的音频</span><br></pre></td></tr></table></figure><h2 id="audio常用DOM属性"><a href="#audio常用DOM属性" class="headerlink" title="audio常用DOM属性"></a>audio常用DOM属性</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> canplay 当浏览器可以播放音频时</span><br><span class="line"><span class="number">2.</span> pause 当音频已暂停时</span><br><span class="line"><span class="number">3.</span> play 当视频已开始时</span><br><span class="line"><span class="number">4.</span> timeupdate 当目前的播放位置已更改时</span><br></pre></td></tr></table></figure><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>控制音频的播放、暂停、重新播放、设置播放倍速、设置音量、获取进度、原生步进器控制播放进度</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">audio</span> <span class="attr">id</span>=<span class="string">&quot;myAudio&quot;</span> <span class="attr">autoplay</span> <span class="attr">src</span>=<span class="string">&quot;你的音频路径&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;player.play()&quot;</span>&gt;</span>播放<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;player.pause()&quot;</span>&gt;</span>暂停<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;player.restart()&quot;</span>&gt;</span>重新播放<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;player.setSpeed(1.5)&quot;</span>&gt;</span>1.5x 倍速<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;player.setSpeed(1)&quot;</span>&gt;</span>正常速度<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;player.setVolume(0.5)&quot;</span>&gt;</span>50% 音量<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;player.setVolume(1)&quot;</span>&gt;</span>100% 音量<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;currentTime&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> / <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;duration&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">max</span>=<span class="string">&quot;100&quot;</span> <span class="attr">step</span>=<span class="string">&quot;0.01&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span> <span class="attr">onchange</span>=<span class="string">&quot;seek(this.value)&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">class</span> <span class="title class_">AudioPlayer</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">constructor</span>(<span class="params">audioElement</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">audio</span> = audioElement;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 播放</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">play</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">audio</span>.<span class="title function_">play</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 暂停</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">pause</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">audio</span>.<span class="title function_">pause</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 重新播放，设置当前播放时间为0,再播放</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">restart</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">audio</span>.<span class="property">currentTime</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">audio</span>.<span class="title function_">play</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 设置播放速度</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">setSpeed</span>(<span class="params">speed</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">audio</span>.<span class="property">playbackRate</span> = speed;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 设置播放音量</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">setVolume</span>(<span class="params">volume</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">audio</span>.<span class="property">volume</span> = volume;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 获取播放进度</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">getTime</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> currentTime = <span class="variable language_">this</span>.<span class="property">audio</span>.<span class="property">currentTime</span>; <span class="comment">// 当前时长</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> duration = <span class="variable language_">this</span>.<span class="property">audio</span>.<span class="property">duration</span>; <span class="comment">// 总时长</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> percentage = duration ? (currentTime / duration) * <span class="number">100</span> : <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">currentTime</span>: currentTime,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">duration</span>: duration,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">percentage</span>: percentage</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> audio = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myAudio&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> player = <span class="keyword">new</span> <span class="title class_">AudioPlayer</span>(audio);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 回显播放时间</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">updateTime</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> time = player.<span class="title function_">getTime</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;currentTime&#x27;</span>).<span class="property">innerHTML</span> = <span class="title function_">formatTime</span>(time.<span class="property">currentTime</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;duration&#x27;</span>).<span class="property">innerHTML</span> = <span class="title function_">formatTime</span>(time.<span class="property">duration</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input[type=&quot;range&quot;]&#x27;</span>).<span class="property">value</span> = time.<span class="property">percentage</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 格式化播放时间</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">formatTime</span>(<span class="params">time</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>(time / <span class="number">60</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> seconds = <span class="title class_">Math</span>.<span class="title function_">floor</span>(time % <span class="number">60</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;minutes&#125;</span>:<span class="subst">$&#123;seconds &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> : <span class="string">&#x27;&#x27;</span>&#125;</span><span class="subst">$&#123;seconds&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 步进器控制播放进度</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">seek</span>(<span class="params">percentage</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> duration = player.<span class="title function_">getTime</span>().<span class="property">duration</span>;</span></span><br><span class="line"><span class="language-javascript">      player.<span class="property">audio</span>.<span class="property">currentTime</span> = duration * (percentage / <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setInterval</span>(updateTime, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> HTML 5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> HTML 5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mavon-editor富文本上传图片</title>
      <link href="/undefined.html"/>
      <url>/undefined.html</url>
      
        <content type="html"><![CDATA[<p><strong>Vue使用<code>mavon-editor</code>上传图片</strong></p><p><strong>问题：</strong></p><ol><li>需要将markdown转成html代码存入数据库，而上传图片默认会转成base64</li><li>base64存入数据库显然不太合理，还会带来其他各种各样的问题</li></ol><p><strong>设计思路</strong></p><ol><li>将图片通过ajax上传到服务器</li><li>服务器保存好图片后将地址返回</li><li>拿到图片地址后通过<code>mavon-editor</code>的<code>this.$refs.md.$img2Url</code>方法放到对应位置</li></ol><p>先看效果图：<br><img src="https://img-blog.csdnimg.cn/4dd21520ff6641e892837884ae6346e4.gif" alt="在这里插入图片描述"></p><h2 id="接下来就是代码"><a href="#接下来就是代码" class="headerlink" title="接下来就是代码"></a>接下来就是代码</h2><p><strong>html部分</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mavon-editor</span> <span class="attr">ref</span>=<span class="string">&quot;md&quot;</span> @<span class="attr">imgAdd</span>=<span class="string">&quot;imgAdd&quot;</span> @<span class="attr">imgDel</span>=<span class="string">&quot;imgDel&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;changeData&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;content&quot;</span> <span class="attr">:toolbars</span>=<span class="string">&quot;toolbars&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p><strong>Js部分，我的后端用的是node，逻辑都是一样的，能返回图片存入地址就行了，代码就不展示了</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">imgAdd</span>(<span class="params">pos, $file</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">      <span class="keyword">var</span> formdata = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">      formdata.<span class="title function_">append</span>(<span class="string">&quot;file&quot;</span>, $file);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">upload</span>(<span class="string">&#x27;/upload&#x27;</span>,formdata).<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (response.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> url = response.<span class="property">data</span>.<span class="property">data</span>[<span class="number">0</span>].<span class="property">url</span>;</span><br><span class="line">            _this.<span class="property">$refs</span>.<span class="property">md</span>.$img2Url(pos, url);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;releaseDynamics&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;markdown&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">mavon-editor</span> <span class="attr">ref</span>=<span class="string">&quot;md&quot;</span> @<span class="attr">imgAdd</span>=<span class="string">&quot;imgAdd&quot;</span> @<span class="attr">imgDel</span>=<span class="string">&quot;imgDel&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;changeData&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;content&quot;</span> <span class="attr">:toolbars</span>=<span class="string">&quot;toolbars&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;ClientReleaseDynamics&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">formValidate</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">title</span>: <span class="string">&quot;&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">cover</span>: <span class="literal">null</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">ruleValidate</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">title</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;标题不能为空&quot;</span>, <span class="attr">trigger</span>: <span class="string">&quot;blur&quot;</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">cover</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;请上传封面&quot;</span>, <span class="attr">trigger</span>: <span class="string">&quot;change&quot;</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">content</span>: <span class="string">&quot;&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">toolbars</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">bold</span>: <span class="literal">true</span>, <span class="comment">// 粗体</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">italic</span>: <span class="literal">false</span>, <span class="comment">// 斜体</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">header</span>: <span class="literal">true</span>, <span class="comment">// 标题</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">underline</span>: <span class="literal">false</span>, <span class="comment">// 下划线</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">strikethrough</span>: <span class="literal">false</span>, <span class="comment">// 中划线</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">mark</span>: <span class="literal">false</span>, <span class="comment">// 标记</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">superscript</span>: <span class="literal">false</span>, <span class="comment">// 上角标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">subscript</span>: <span class="literal">false</span>, <span class="comment">// 下角标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">quote</span>: <span class="literal">false</span>, <span class="comment">// 引用</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">ol</span>: <span class="literal">true</span>, <span class="comment">// 有序列表</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">ul</span>: <span class="literal">false</span>, <span class="comment">// 无序列表</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">link</span>: <span class="literal">false</span>, <span class="comment">// 链接</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">imagelink</span>: <span class="literal">true</span>, <span class="comment">// 图片链接</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">code</span>: <span class="literal">false</span>, <span class="comment">// code</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">table</span>: <span class="literal">false</span>, <span class="comment">// 表格</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">fullscreen</span>: <span class="literal">true</span>, <span class="comment">// 全屏编辑</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">readmodel</span>: <span class="literal">false</span>, <span class="comment">// 沉浸式阅读</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">htmlcode</span>: <span class="literal">true</span>, <span class="comment">// 展示html源码</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">help</span>: <span class="literal">false</span>, <span class="comment">// 帮助</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">/* 1.3.5 */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">undo</span>: <span class="literal">true</span>, <span class="comment">// 上一步</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">redo</span>: <span class="literal">true</span>, <span class="comment">// 下一步</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">trash</span>: <span class="literal">true</span>, <span class="comment">// 清空</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">save</span>: <span class="literal">false</span>, <span class="comment">// 保存（触发events中的save事件）</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">/* 1.4.2 */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">navigation</span>: <span class="literal">false</span>, <span class="comment">// 导航目录</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">/* 2.1.8 */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">alignleft</span>: <span class="literal">true</span>, <span class="comment">// 左对齐</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">aligncenter</span>: <span class="literal">true</span>, <span class="comment">// 居中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">alignright</span>: <span class="literal">false</span>, <span class="comment">// 右对齐</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">/* 2.2.1 */</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">subfield</span>: <span class="literal">false</span>, <span class="comment">// 单双栏模式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">preview</span>: <span class="literal">true</span>, <span class="comment">// 预览</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">showContent</span>: <span class="string">&quot;&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="title function_">changeData</span>(<span class="params">value, render</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// value中是文本值,render是渲染出的html文本</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">showContent</span> = render;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(render);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">imgAdd</span>(<span class="params">pos, $file</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> formdata = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      formdata.<span class="title function_">append</span>(<span class="string">&quot;file&quot;</span>, $file);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">upload</span>(<span class="string">&#x27;/upload&#x27;</span>,formdata).<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">// 第二步.将返回的url替换到文本原位置![...](0) -&gt; ![...](url)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">if</span> (response.<span class="property">status</span> === <span class="number">200</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> url = response.<span class="property">data</span>.<span class="property">data</span>[<span class="number">0</span>].<span class="property">url</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            _this.<span class="property">$refs</span>.<span class="property">md</span>.$img2Url(pos, url);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">imgDel</span>(<span class="params">pos</span>) &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue2.x </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图片裁剪上传 vue-cropper</title>
      <link href="/undefined.html"/>
      <url>/undefined.html</url>
      
        <content type="html"><![CDATA[<p><strong>需求：<br>1.选择图片<br>2.裁剪图片<br>3.裁剪后的图片回显</strong></p><p><strong>设计思路：<br>1.选择图片后使用 <em>vue-cropper</em> 插件进行裁剪<br>2.裁剪后通过 <em>this.$refs.cropper.getCropBlob((data) &#x3D;&gt; {})</em>  方法将图片转成formData<br>3.将formData通过 <em>FileReader</em> 对象转成base64渲染达到回显效果<br>4.将formData传递给父组件</strong></p><p><strong>效果图</strong><br><img src="https://img-blog.csdnimg.cn/5588625970484070887c15c2e043b44c.gif" alt="裁剪上传图片效果图"></p><h2 id="接下来就是代码了"><a href="#接下来就是代码了" class="headerlink" title="接下来就是代码了"></a>接下来就是代码了</h2><p><strong>首先安装iview，怎么安装就看文档去把，我的iview版本为2.14.3</strong><br><strong>安装 vue-cropper</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-cropper</span><br></pre></td></tr></table></figure><h2 id="将上传图片组件化，方便在父组件使用"><a href="#将上传图片组件化，方便在父组件使用" class="headerlink" title="将上传图片组件化，方便在父组件使用"></a>将上传图片组件化，方便在父组件使用</h2><p>子组件名为 <strong>UploadHeadImg.vue</strong> 代码如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Modal</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">v-model</span>=<span class="string">&quot;modal1&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&quot;操作图片&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:loading</span>=<span class="string">&quot;loading&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      @<span class="attr">on-ok</span>=<span class="string">&quot;uploadAvatar&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cropper&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">vueCropper</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">ref</span>=<span class="string">&quot;cropper&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:img</span>=<span class="string">&quot;option.img&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:outputSize</span>=<span class="string">&quot;option.size&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:outputType</span>=<span class="string">&quot;option.outputType&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:info</span>=<span class="string">&quot;true&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:full</span>=<span class="string">&quot;option.full&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:canMove</span>=<span class="string">&quot;option.canMove&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:canMoveBox</span>=<span class="string">&quot;option.canMoveBox&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:original</span>=<span class="string">&quot;option.original&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:autoCrop</span>=<span class="string">&quot;option.autoCrop&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:fixed</span>=<span class="string">&quot;option.fixed&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:fixedNumber</span>=<span class="string">&quot;option.fixedNumber&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:centerBox</span>=<span class="string">&quot;option.centerBox&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:infoTrue</span>=<span class="string">&quot;option.infoTrue&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">:fixedBox</span>=<span class="string">&quot;option.fixedBox&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span><span class="tag">&lt;/<span class="name">vueCropper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!--cropper--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Modal</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Upload</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">ref</span>=<span class="string">&quot;upload&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:show-upload-list</span>=<span class="string">&quot;false&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:format</span>=<span class="string">&quot;[&#x27;jpg&#x27;, &#x27;jpeg&#x27;, &#x27;png&#x27;]&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:max-size</span>=<span class="string">&quot;2048&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:before-upload</span>=<span class="string">&quot;handeleBeforeUpload&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">type</span>=<span class="string">&quot;drag&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">accept</span>=<span class="string">&quot;image/*&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">action</span>=<span class="string">&quot;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">class</span>=<span class="string">&quot;upload-box&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;upload-icon&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;!imgSrc&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Icon</span> <span class="attr">type</span>=<span class="string">&quot;ios-camera&quot;</span> <span class="attr">size</span>=<span class="string">&quot;40&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Icon</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;upload-icon&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;imgSrc&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;upload-img&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;imgSrc&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Upload</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">VueCropper</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue-cropper&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;UploadHeadImg&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">VueCropper</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">modal1</span>: <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">imgSrc</span>: <span class="string">&quot;&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">option</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">img</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 裁剪图片的地址</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">info</span>: <span class="literal">true</span>, <span class="comment">// 裁剪框的大小信息</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">outputSize</span>: <span class="number">0.8</span>, <span class="comment">// 裁剪生成图片的质量</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">outputType</span>: <span class="string">&quot;png&quot;</span>, <span class="comment">// 裁剪生成图片的格式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">canScale</span>: <span class="literal">false</span>, <span class="comment">// 图片是否允许滚轮缩放</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">autoCrop</span>: <span class="literal">true</span>, <span class="comment">// 是否默认生成截图框</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// autoCropWidth: 300, // 默认生成截图框宽度</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// autoCropHeight: 200, // 默认生成截图框高度</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">fixedBox</span>: <span class="literal">true</span>, <span class="comment">// 固定截图框大小 不允许改变</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">fixed</span>: <span class="literal">true</span>, <span class="comment">// 是否开启截图框宽高固定比例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">fixedNumber</span>: [<span class="number">1</span>, <span class="number">1</span>], <span class="comment">// 截图框的宽高比例</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">full</span>: <span class="literal">true</span>, <span class="comment">// 是否输出原图比例的截图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">canMoveBox</span>: <span class="literal">false</span>, <span class="comment">// 截图框能否拖动</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">original</span>: <span class="literal">false</span>, <span class="comment">// 上传图片按照原始比例渲染</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">centerBox</span>: <span class="literal">false</span>, <span class="comment">// 截图框是否被限制在图片里面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">infoTrue</span>: <span class="literal">true</span>, <span class="comment">// true 为展示真实输出图片宽高 false 展示看到的截图框宽高</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fileinfo</span>: <span class="string">&quot;&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 防止重复提交</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">loading</span>: <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">handeleBeforeUpload</span>(<span class="params">file</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">fileinfo</span> = file;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> data = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(<span class="keyword">new</span> <span class="title class_">Blob</span>([file]));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">option</span>.<span class="property">img</span> = data;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">modal1</span> = <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//取消自动上传</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">uploadAvatar</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> that = <span class="variable language_">this</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">cropper</span>.<span class="title function_">getCropBlob</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        that.<span class="property">loading</span> = <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        that.<span class="property">$refs</span>.<span class="property">upload</span>.<span class="title function_">clearFiles</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        formData.<span class="title function_">append</span>(<span class="string">&quot;file&quot;</span>, data);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> file = formData.<span class="title function_">get</span>(<span class="string">&quot;file&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 转为 base64</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        reader.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">// base64结果</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          that.<span class="property">imgSrc</span> = <span class="variable language_">this</span>.<span class="property">result</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          that.<span class="property">loading</span> = <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        reader.<span class="title function_">readAsDataURL</span>(file);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        that.$emit(<span class="string">&#x27;getFormdata&#x27;</span>, file);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.cropper</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: auto;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">300px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.upload-box</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">display</span>: inline-block;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  ::v-deep .ivu-upload.ivu-upload-drag&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#999</span> <span class="meta">!important</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.upload-box</span>,</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.upload-icon</span>,</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.upload-img</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">120px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">120px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.upload-icon</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">justify-content</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="子组件写好了之后就到父组件使用了"><a href="#子组件写好了之后就到父组件使用了" class="headerlink" title="子组件写好了之后就到父组件使用了"></a>子组件写好了之后就到父组件使用了</h2><p><strong>父组件代码如下</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">UploadHeadImg</span> @<span class="attr">getFormdata</span>=<span class="string">&quot;getFormdata&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">UploadHeadImg</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">UploadHeadImg</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/UploadHeadImg.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&#x27;ClientHome&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">UploadHeadImg</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">getFormdata</span>(<span class="params">v</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(v); <span class="comment">// 子组件自定义事件传过来的formData，后续用来上传到后端</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><strong>以上就是全部代码了，对你有帮助的话记得点赞收藏哦</strong></p>]]></content>
      
      
      <categories>
          
          <category> Vue2.x </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 插件 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
